name: Discord Webhook Test

on:
  workflow_dispatch:  # This allows manual triggering from the GitHub UI

jobs:
  send-discord-message:
    runs-on: ubuntu-latest
    steps:
      - name: Discord Webhook Action
        uses: tsickert/discord-webhook@v6.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          username: GopherMaps Data
          avatar-url: https://github.com/ryan-roche/gophermaps-data/blob/41aff9bce9af2257665f8393c372d84f7fc5826a/webhook-icons/gw-data.png?raw=true
          embed-title: "TODO say run succeeded/failed"
          embed-url: "TODO get url to current workflow run"
          embed-description: "TODO list success/error info"
          embed-author-name: "Generate manifest.json"
          embed-author-icon-url: "https://github.com/github.png"
          embed-author-url: "https://github.com/ryan-roche/gophermaps-data/actions/workflows/manifest-generator.yml"
          embed-thumbnail-url: "https://github.com/actions-user.png"
          embed-color: 15430476
          # TODO add conditional color
